# =========================
# 1. FUNDAMENTALS
# =========================
apiVersion: v3.1.0  # Version of the standard used to build data contract. 
kind: DataContract #The kind of file this is.

id: confins_stg_agreementasset # A unique identifier used to reduce the risk of dataset name collisions.
domain : agreement
version: 1.0.0 # Current version of the data contract.
status: DRAFT  #Current status of the data contract. Examples are "proposed", "draft", "active", "deprecated", "retired".

description:
  purpose: Ensure data quality and consistency for customer asset # Intended purpose for the provided data.
  usage: Used for reporting and analytics # Recommended usage of the data.
  limitations: Internal use only # Technical, compliance, and legal limitations for data use.

# =========================
# OWNERSHIP
# =========================
team:
  name : regina # The user's name.
  role : data engineer intern #	The user's job role; Examples might be owner, data steward.

# =========================
# INFRASTRUCTURE
# =========================
servers:
  - server: trino-prod
    type: trino
    database: production
    schema: raw_data_prod

# =========================
# 3. SCHEMA CONTRACT
# =========================
schema:
- name : confins_stg_agreementasset
  physicalType: table # The physical element data type in the data source. For objects: table, view, topic, file
  description: table for customer asset # Description of the element. 

  properties : 
  - name: otr_price
    logicalType: number
    physicalType : double
    nullable: false 
    criticalDataElement: true
    description: Harga OTR
    quality :
      - metric : valueOutOfRange
        description : "otr price must be greater than 0"
        arguments :
          minValue : 0
        dimension: correctness
        severity: warning
      - metric : valuesNotContainDoubleSpaces
        description : "Must not contain double spaces"
        dimension: correctness
        severity: critical
  - name: assettypeid
    logicalType: string
    physicalType : text
    nullable: false 
    criticalDataElement: true
    description: ID asset Type
    quality:
      - metric : valuesNotContainDoubleSpaces
        description : "Must not contain double spaces"
        dimension: correctness
        severity: critical
  - name: manufacturingyear
    logicalType: number
    physicalType : bigint
    nullable: true
    criticalDataElement: true
    description: Tahun pembuatan
    quality :
      - metric: valueOutOfRange
        description: "Manufacturing year must be  after 1900"
        arguments:
          minValue: "1901"
        dimension: correctness
        severity: critical
      - metric : valuesNotContainDoubleSpaces
        description : "Must not contain double spaces"
        dimension: correctness
        severity: critical
  - name: suppliername
    logicalType: string
    physicalType : varchar
    nullable: true
    criticalDataElement: true
    description: supplier name
    quality:
    - metric : valuesNotContainDoubleSpaces
      description : "Must not contain double spaces"
      dimension: correctness
      severity: critical
  - name: serialno1
    logicalType: string
    physicalType : varchar
    nullable: true
    criticalDataElement: true
    description: no rangka
    quality:
    - metric : valuesNotContainDoubleSpaces
      description : "Must not contain double spaces"
      dimension: correctness
      severity: critical
  - name: serialno2
    logicalType: string
    physicalType : varchar
    nullable: true
    criticalDataElement: true
    description: no mesin
    quality:
    - metric : valuesNotContainDoubleSpaces
      description : "Must not contain double spaces"
      dimension: correctness
      severity: critical
  - name: licenseplate
    logicalType: string
    physicalType : varchar
    nullable: true
    criticalDataElement: true
    description: no plat
    quality:
    - metric : valuesNotContainDoubleSpaces
      description : "Must not contain double spaces"
      dimension: correctness
      severity: critical
  - name: owneraddress
    logicalType: string
    physicalType : varchar
    nullable: true
    criticalDataElement: true
    description: alamat pemilik
    quality:
    - metric : valuesNotContainDoubleSpaces
      description : "Must not contain double spaces"
      dimension: correctness
      severity: critical

# =========================
# 4. DATA QUALITY CONTRACT
# =========================
dataQuality:
  - type: library # Type of DQ rule. Valid values are library (default), text, sql, and custom.
    metric : rowCountBetween
    description: "Row count must be between 1 and 1000"
    mustBeGreaterThan: 0
    mustBeLessThan: 1000
# =========================
# 5. FRESHNESS CONTRACT
# =========================
slaProperties:
  - property: latency # A list of key/value pairs for SLA specific properties
    value: 24 # 	Agreement value.
    unit: h # d, day, days for days; y, yr, years for years, etc
    element: confins_stg_agreementasset.updated_at # 	Element(s) to check on.
    description: Customer asset data latency must not exceed 24 hours # Description of the SLA for humans

# =========================
# 6. CHANGE POLICY
# =========================
changePolicy:
  breakingChange: requires new contract version

# =========================
# 7. METADATA
# =========================
contractCreatedAt: 2026-01-21
